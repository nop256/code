<html><head></head><body><h1>Filter</h1>

<p>Write a RISC-V function to copy some values from an array into
another array:</p>

<pre><code>filter(int *in_start, int *in_end, int *out_start) -&gt; int *out_end
</code></pre>

<p><code>filter</code> is given the address of the beginning of an array
(<code>in_start</code>), the end of that array (<code>in_end</code>). It should copy some
of the values from that array into a new array at address
<code>out_start</code> and return the address of the end of that array when it
is finished.</p>

<p>For each element of the input array, it should call the function
<code>check</code> to decide if that element should be copied or ignored. If
<code>check</code> returns zero the array element should be skipped, and if it
returns non-zero it should copy that element to the output array.</p>

<p>So it should implement something like this:</p>

<pre><code>def filter(in_start, in_end, out_start):
    while in_start &lt; in_end:
        # load the element from address in_start
        elt = *in_start

        # see if we should copy it
        keep = check(elt)
        if keep != 0:
            # write the element to out
            *out_start = elt

            # increment out_start (this adds 8 to the address
            # due to pointer arithmetic)
            out_start += 1

        # increment in_start (adds 8 to the pointer)
        in_start += 1

    # out_start is now the end of the output array
    return out_start
</code></pre>

<p>Note that <code>filter</code> is not a leaf function so you should set up a
stack frame so that you can safely call <code>check</code>.</p>

<p>Write your code in <code>filter.s</code></p>
</body></html>